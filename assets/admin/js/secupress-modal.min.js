var $=jQuery;function ModalSecuPress(e,s){var t=this;this.elem=e,this.overlay=$(".secupress-Modal-overlay"),this.radio=$("input[name=reason]",e),this.closer=$(".secupress-Modal-close, .secupress-Modal-cancel",e),this.return=$(".secupress-Modal-return",e),this.opener=s,this.question=$(".secupress-Modal-question",e),this.button=$(".secupress-button-send",e),this.title=$(".secupress-Modal-header h2",e),this.textFields=$("input[type=text], textarea",e),this.hiddenReason=$("#secupress-reason",e),this.hiddenDetails=$("#secupress-details",e),this.titleText=this.title.html(),this.opener.click((function(e){e.preventDefault(),t.open()})),this.closer.click((function(){t.close()})),$("body").on("keyup",(function(){27===event.keyCode&&t.close()})),$(".secupress-Modal-overlay").on("click",(function(){t.close()})),this.return.click((function(){t.returnToQuestion()})),this.radio.click((function(){t.change($(this))})),this.textFields.keyup((function(){t.hiddenDetails.val($(this).val()),""!=t.hiddenDetails.val()?(t.button.removeClass("secupress-isDisabled"),t.button.removeAttr("disabled")):(t.button.addClass("secupress-isDisabled"),t.button.attr("disabled",!0))}))}$(document).ready((function(){var e=$('[data-plugin="secupress-pro/secupress-pro.php"] span.deactivate a');new ModalSecuPress($("#secupress-Modal"),e),$(".secupress-Modal-footer .secupress-button").attr("href",$(e).attr("href")),$(".secupress-button-send").hide(),$("#secupress-send-reason").on("click",(function(e){var s={action:"secupress_send_deactivation_info",reason:$("#secupress-reason").val()+" "+$("#secupress-details").val(),nonce:$("#secupress-Modal").data("nonce")};$.get(ajaxurl,s)}))})),ModalSecuPress.prototype.change=function(e){var s=e.attr("id");switch(this.hiddenReason.val(e.val()),this.hiddenDetails.val(""),this.textFields.val(""),$(".secupress-Modal-fieldHidden").hide(200),$(".secupress-Modal-hidden").hide(200),$(".secupress-button-send").show(),$(".secupress-button-skip").hide(),s){case"sp-reason-temporary":break;case"sp-reason-broke":case"sp-reason-score":case"sp-reason-hacked":case"sp-reason-complicated":var t=$("#"+s+"-panel");this.question.hide(200),this.return.show(),t.show(200);var i=e.next("label").html();this.title.html(i);break;case"sp-reason-competitor":case"sp-reason-other":var o=e.siblings(".secupress-Modal-fieldHidden");o.show(200),o.find("input, textarea").focus().keyup()}},ModalSecuPress.prototype.returnToQuestion=function(){$(".secupress-Modal-fieldHidden").hide(200),$(".secupress-Modal-hidden").hide(200),this.question.show(200),this.return.hide(),this.title.html(this.titleText),this.radio.prop("checked",!1),this.hiddenReason.val(""),this.hiddenDetails.val(""),$(".secupress-button-send").hide(),$(".secupress-button-skip").show()},ModalSecuPress.prototype.open=function(){var e=this;this.overlay.fadeIn(100,(function(){e.elem.slideDown(300)}))},ModalSecuPress.prototype.close=function(){var e=this;this.returnToQuestion(),this.elem.slideUp(200,(function(){e.overlay.fadeOut(80)})),this.radio.prop("checked",!1)};